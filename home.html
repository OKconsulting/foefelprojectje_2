<html class="ui-mobile">
<head>
    <title>Time.e-ok</title>
    <link rel="stylesheet" href="./themes/reset.css" />
    <link rel="stylesheet" href="./themes/tijdsregistratie.css" />
    <link rel="stylesheet" href="./themes/stijl.css" />
    <link rel="stylesheet" href="./themes/jquery.mobile.icons.min.css" />
    <link rel="stylesheet" href="./themes/jquery.mobile.structure-1.4.2.min.css" />
    <link rel="stylesheet" href="./themes/jquery.mobile.datepicker.css" />
    <script src="./scripts/jquery-1.10.2.min.js"></script>
    <script src="./scripts/jquery.mobile-1.4.2.min.js"></script>
    <script src="./scripts/jquery.mobile.datepicker.js"></script>
</head>

<body class="ui-mobile-viewport ui-overlay-c" id="containerPagina">
    <div data-role="page" id="home" data-theme="b">
        <div data-role="header" class="header" data-position="fixed">
            <div class="left"><a href="#home_panel"><img src="images/menu.png" /></a></div>
            <div class="right"><a href="#selecteerPeriode" data-role="none" data-rel="popup" data-position-to="window" onclick="loadAll();"><img src="images/herladen.png" /></a></div>
            <div class="center"><h1><a href="#home">Time.e-ok</a></h1></div>
        </div>

        <div data-role="content" class="ui-content" role="main">
            <div class="melding">
            </div>

            <div class="time">
                <div class="containerTime">
                    <div id="containerStart">
                        <form>
                            <input type="button" value="Start" class="knop start" onclick="post('START', 'start')" />
                            <textarea class="commentaar" placeholder="Heeft u een melding?"></textarea>
                        </form>
                    </div>

                    <div id="containerStop">
                        <form>
                            <p>U heeft vandaag al gewerkt voor</p>
                            <p id="tijdAanHetWerk">00:00:00</p>
                            <div id="progressbar"><div id='progressbarLabel'>00:00:00</div></div>
                            <input type="button" value="Stop" class="knop stop" onclick="post('STOP', 'stop')" />
                            <textarea class="commentaar" placeholder="Heeft u een melding?"></textarea>
                        </form>
                    </div>

                    <div id="containerVergeten">
                        <form>
                            <p></p>
                            <input type="text" class="tijd2 textbox-small" id="vergeten" data-role="none" /><br />
                            <input type="button" value="Stop op ingevulde uur" class="knop stop" onclick="post('STOP', 'stopVergeten')" />
                            <textarea class="commentaar" placeholder="Heeft u een melding?"></textarea>
                        </form>
                    </div>

                    <div id="containerKeuze">
                        <form>
                            <p></p>
                            <a onclick="popup('vergeten');">
                                <input type="button" value="Ik ben het vergeten" class="knop stop" />
                            </a>
                            <a onclick="popup('doorgewerkt');">
                                <input type="button" value="Ik heb doorgewerkt" class="knop stop" />
                            </a>
                        </form>
                    </div>

                    <div id="containerKeuzeVergeten">
                        <form>
                            <p></p>
                            <input type="text" class="tijd2 textbox-small" id="vergetenKeuze" data-role="none" /><br />
                            <input type="button" value="Stop op ingevulde uur" class="knop stop" onclick="post('STOP', 'stopKeuzeVergeten')" />
                            <textarea class="commentaar" placeholder="Heeft u een melding?"></textarea>
                        </form>
                    </div>

                    <div id="containerKeuzeDoorgewerkt">
                        <form>
                            <p>Gelieve te bevestigen dat u doorgewerkt hebt deze nacht.</p>
                            <input type="button" value="Ik heb doorgewerkt" class="knop stop" onclick="post('STOP', 'stopKeuzeWerkend')" />
                            <textarea class="commentaar" placeholder="Heeft u een melding?"></textarea>
                        </form>
                    </div>

                </div>
            </div>
        </div>

        <div data-role="panel" id="home_panel" data-position="left" data-display="overlay" data-theme="b" class="ui-panel ui-panel-position-left ui-panel-display-reveal ui-body-b ui-panel-animate ui-panel-open">
            <div class="ui-panel-inner">
                <a href="#home" data-transition="none" data-rel="close" class='home_hide_panel' style='display:none;'></a>
                <ul class="menu">
                    <li><a href="#home" data-rel="close" data-transition="none"><img src="images/home.png" /><span>Home</span><div class="clear-fix"></div></a></li>
                    <li><a href="#statistieken" data-rel="close" data-transition="none"><img src="images/statistieken.png" /><span>Statistieken</span><div class="clear-fix"></div></a></li>
                    <li><a onclick="logout()"><img src="images/logout.png" /><span>Logout</span><div class="clear-fix"></div></a></li>
                </ul>
            </div>
        </div>
    </div>

    <div data-role="page" id="statistieken" data-theme="b">
        <div data-role="header" class="header" data-position="fixed">
            <div class="left"><a href="#statistieken_panel" data-transition="none"><img src="images/menu.png" /></a></div>
            <div class="right"><a href="#selecteerPeriode" data-role="none" data-rel="popup" data-position-to="window"><img src="images/kalender.png" /></a></div>
            <div class="center"><h1><a href="#home">Time.e-ok</a></h1></div>
        </div>

        <div data-role="popup" id="selecteerPeriode" class="ui-content" data-theme="a">
            <div style="text-align:center;">Selecteer van welke maand je de statistieken wilt opvragen.</div>
            <input type="text" id="date-input" data-inline="true" data-role="date" style="display:none;">
            <a data-rel="back" class="ui-btn" onclick="loadStatistieken();">Bevestig</a>
        </div>

        <div data-role="content" class="ui-content" role="main">
            <div class="melding">
            </div>
            <table class="tabel_uren" id="tabelStatistieken">
                <tbody>
                    <tr>
                        <th>
                            Datum
                        </th>
                        <th>
                            Te doen
                        </th>
                        <th>
                            Gedaan
                        </th>
                    </tr>
                </tbody>
                <tbody></tbody>
            </table>
            <div id="load-statistieken">
                <img src="images/load.gif" alt="" />
            </div>
            <div id="legende">
                De kleurencodes kunnen nagekeken worden op de website.
            </div>
        </div>

        <div data-role="panel" id="statistieken_panel" data-position="left" data-display="overlay" data-theme="b" class="ui-panel ui-panel-position-left ui-panel-display-reveal ui-body-b ui-panel-animate ui-panel-open">
            <div class="ui-panel-inner">
                <a href="#home" data-transition="none" data-rel="close" class='statistieken_hide_panel' style='display:none;'></a>
                <ul class="menu">
                    <li><a href="#home" data-rel="close" data-transition="none"><img src="images/home.png" /><span>Home</span><div class="clear-fix"></div></a></li>
                    <li><a href="#statistieken" data-rel="close" data-transition="none"><img src="images/statistieken.png" /><span>Statistieken</span><div class="clear-fix"></div></a></li>
                    <li><a onclick="logout()"><img src="images/logout.png" /><span>Logout</span><div class="clear-fix"></div></a></li>
                </ul>
            </div>
        </div>
    </div>
    <script src="scripts/database-connection.js"></script>
    <script src="scripts/jquery-ui-1.10.4.custom.js"></script>
    <script src="scripts/moment.js"></script>
    <script src="scripts/jquery.inputmask.js"></script>
    <script src="scripts/tijd.js"></script>
    <script src="scripts/statistieken.js"></script>
    <script src="cordova.js"></script>
    <script charset="UTF-8">
        var mdwID = window.localStorage.getItem("mdwID");
        //home
        var tijdLogs;
        var latitudeLongitude = "", commentaar = "", opmerking = "", opmerkingLocatie = "", opmerkingHR = "", nacht = false;
        var tijdAanHetWerk = moment(0);
        moment.lang('nl');

        $('.tijd2').inputmask('99u99');

        //statistieken
        var tijdPerDag;
        var table = document.getElementById("tabelStatistieken");
        var rijNummer = 1;
        var vandaag = moment();

        //$(document).ready(function () {
        //    loadAll();
        //});

        document.addEventListener("deviceready", loadAll, false);
        document.addEventListener("resume", isVerplicht, false);

        function loadAll() {
            isVerplicht();
            loadStatistieken();
        }

        function melding(bericht) {
            $('.melding').html(bericht);
            $('.melding').fadeIn();
            setTimeout(function () { $('.melding').fadeOut(); }, 3000);
        }

        function logout() {
            window.localStorage.removeItem("mdwID");
            window.location.href = "./index.html#login";
        }
    </script>
</body>

</html>
